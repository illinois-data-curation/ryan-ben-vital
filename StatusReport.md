# Progress Report

### Ben - Monday, November 4th

Completed programmatic data acquisition and integrity checks on datasets. Since the datasets are not intuitively programmatically downloadable from their respective websites, alternative methods were used. For the [NCEI precipitation dataset](https://www.ncei.noaa.gov/access/monitoring/climate-at-a-glance/statewide/time-series/13/pcp/1/9/1895-2024?base_prd=true&begbaseyear=1901&endbaseyear=2000), the site API is cumbersome and perplexing. Instead, the *requests* library is used to retrieve a direct link to the CSV download on the webpage. The response text is then read by StringIO and then converted into a pandas dataframe (`df_ncei`). For the [Iowa Open Data auto-accident dataset](https://data.iowa.gov/Crashes/Vehicle-Crashes-in-Iowa/tw78-ziwj/about_data), the Socrata API is used, with a modified setting to account for the size of the dataset. The default record limit for the API is 1,000 rows, however, using the suffix "?$limit=583174" in our API endpoint, we can modify the record limit to the size of the dataset (583174 rows). Then, the *requests* library is used to retrieve the API endpoint. The response text is then read by StringIO and then converted into a pandas dataframe (`df_accidents`).

Before each response text is converted into a dataframe, an integrity check is done on the response. To start, SHA-256 hash is created from the response using hashlib. If this checksum is found in the checksum set of real checksums (called `checksums`), then the response text is converted into a pandas dataframe.

Lastly, some modifications on the datasets were completed. For `df_accident`, the `date_of_crash` column was used to create a new column, `year`. The dataframe was then shortened to include only the columns `year`, `enviro_conditions`, `light_conditions`, `surface_conditions`, `weather_conditions`, `crash_severity`, `fatalities`, `injuries`, `majinjury`, `mininjury`, `possinjury`, `unkinjury`, and `propdmg`. For `df_ncei`, the `Date` column was used to create a new column, `year`. Then, the column `Value` was renamed to `precipitation`. The dataframe was then shortened to include only the columns `year` and `precipitation`.